{% extends 'base.html' %}

{% block title %}Edit article{% endblock %}

{% block content %}

<div class="container w-50">
    <h1>Edit Article</h1>
    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label for="id_title" class="form-label">Title:</label>
            <input type="text" name="title" value="{{ form.initial.title }}" maxlength="100" required="" id="id_title"
                class="form-control">
        </div>
        <div class="mb-3">
            <label for="id_content" class="form-label">Content:</label>
            <textarea type="text" name="content" cols="3" rows="5" maxlength="2000" required="" id="id_content"
                class="form-control">{{ form.initial.content }}</textarea>
        </div>
        <div class="mb-3 form-check">
            <input type="checkbox" name="public" id="id_public" {% if form.initial.public %}checked{% endif %}
                class="form-check-input">
            <label for="id_public" class="form-check-label">Public</label>
        </div>
        <div class="mb-3" id="password-field">
            <label for="id_password" class="form-label">Password:</label>
            <input type="password" name="password" maxlength="100" id="id_password" class="form-control"
                value="{{ form.initial.password }}">
        </div>
        <div class="mb-3">
            <label for="id_date" class="form-label">Date:</label>
            <input type="date" name="date" value="{{ form.initial.date }}" maxlength="100" required="" id="id_date"
                class="form-control">
        </div>
        <div class="mb-3">
            <label for="id_location" class="form-label">Location:</label>
            <input type="text" name="location" value="{{ form.initial.location }}" maxlength="100" required=""
                id="id_location" class="form-control">
        </div>
        <button type="submit" class="btn btn-success">Save</button>
    </form>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function ()
    {
        const publicCheckbox = document.getElementById('id_public');
        const passwordField = document.getElementById('password-field');

        function togglePasswordField()
        {
            if (publicCheckbox.checked)
            {
                passwordField.style.display = 'none';
            } else
            {
                passwordField.style.display = 'block';
            }
        }

        publicCheckbox.addEventListener('change', togglePasswordField);
        togglePasswordField(); // Initial check
    });
</script>

{% endblock %}